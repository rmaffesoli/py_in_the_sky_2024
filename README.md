# py_in_the_sky_2024


## Overview
* Our Hackathon submisison focuses on expanding the metadata functionalities of Helix Dam to provide more robust view into the asset data as well as provide AI generated Natural Language descriptions for any asset with a preview image available to it. This data is all registered as Helix Dam asset metadata which also allows for expanded search capabilites. The image descriptions also take into account file path information as well as the description of the changelist for the asset to try and provide additional context clues for the users. 

## Participants
* Jase Lindgren
* Ryan Maffesoli

### Video Explanation
[![Youtube Video Explanation](https://github.com/rmaffesoli/py_in_the_sky_2024/assets/91618797/1b2dea35-35ae-48d7-bd95-2f7b26e866eb)](https://youtu.be/fIbUnETHFY4?si=KDUgh3rlcT27nuW0)


## Installation

* Currently, the running triggers via source doesn't require any additional installation beyond cloning the repository, having Python 3.9 or later, and installing the requirements

## Requirements
Python              3.9 or greater  
p4python            2023.2.2581979\
requests            2.32.2   
boto3               1.34.110


## Environment File configuration

* Server configuration and access keys are defined in the environment.py file. You'll need to provide your Helix Dam web address as well as your HTH Internal Account Key to access the API with authentication. Similarly You'll need to provide your amazon credentials to an account that has access to claude AI.
```bash
os.environ["DAM_SERVER_ADDRESS"] = "http://ip_or_domain_name"
os.environ["DAM_ACCOUNT_KEY"] = "c531XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
os.environ["AWS_ACCESS_KEY_ID"] = "AKXXXXXXXXXXXXXXXXXX"
os.environ["AWS_SECRET_ACCESS_KEY"] = "OXhXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
os.environ["AWS_DEFAULT_REGION"] = "us-west-2"

```


## UAsset Trigger
* The UAsset is able to read the header content of UAsset files to append additional metadata for UAsset Files that can provide improved search capabilities including Engine Compatibility information as well as UAsset Type as metadata within Helix Dam. 

## Image Description Trigger
* The Image Description Trigger uses the existing thumb and preview images generated by HelixSearch along with the file path and changelist description to generate a natural language description of the image. While The description itself can provide better context to those using Helix Dam as an asset catalog, as the description is registered as metadata it also provides additional search capabilities beyond the standard tagging system. 
* Additional Tags from Claude AI are also added to the assets on top of the Existing ai tags provided by Rekognition.

## Trigger Setup Example
* When adding these triggers to your system we recommend using the provided spawn_process wrapper function, This allows for the triggers to fire as detached subprocesses so that the User's submission experience isn't slowed down with each triggers processing.
```bash
	uasset-analyzer change-commit //... "python3.9 /home/perforce/triggers/hackathon/spawn_process.py /home/perforce/triggers/hackathon/uasset_trigger.py %changelist%"
	claude-ai change-commit //... "python3.9 /home/perforce/triggers/hackathon/spawn_process.py  /home/perforce/triggers/hackathon/main.py %changelist%"
```
